const mainElementPage=document.documentElement,mainElementPageWidth=mainElementPage.clientWidth,scroll=window.innerWidth-mainElementPageWidth,modal=document.querySelector(".modal"),body=document.querySelector("body"),modalEl=document.querySelector(".modal__wrapper");document.addEventListener("click",(e=>{if(e.target.closest(".catalog__card-desc")){body.style.paddingRight=scroll+"px",modal.classList.add("modal--open"),modalEl.classList.add("modal__wrapper--visible"),body.classList.add("hidden");const t=e.target.closest(".catalog__card"),a={id:t.dataset.id,img:t.querySelector(".catalog__card-img").getAttribute("src"),title:t.querySelector(".catalog__card-title").textContent,weight:t.querySelector(".catalog__card-weight").textContent,price:t.querySelector(".catalog__card-price-item").textContent},c=`\n        <button class="modal__closed">\n          <svg class="modal__closed-ico">\n            <use href="images/sprite/sprite.svg#closed"></use>\n          </svg>\n        </button>\n        <h3 class="modal__title">\n          ${a.title}\n        </h3>\n        <div class="modal__content">\n          <img class="modal__img" src="${a.img}" alt='Бургер - "${a.title}"'>\n          <div class="modal__description modal-description">\n            <p class="modal-description__item">\n              Супер мясное наслаждение! Большая рубленая котлета из свежего говяжего мяса покорит вас своей\n              сочностью, а хрустящие листья салата добавят свежести.\n            </p>\n            <h6 class="modal-description__title">\n              Состав:\n            </h6>\n            <ul class="modal-description__list description-list">\n              <li class="description-list__item">Пшеничная булочка</li>\n              <li class="description-list__item">Котлета из говядины</li>\n              <li class="description-list__item">Красный лук</li>\n              <li class="description-list__item">Листья салата</li>\n              <li class="description-list__item">Соус горчичный</li>\n            </ul>\n            <div class="modal-description__calories">\n              <span class="modal-description__weight">${a.weight},</span>\n              <span class="modal-description__calories-item">ккал 430</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;modalEl.innerHTML=c}e.target.closest(".modal__closed")&&(body.style.paddingRight="0px",modal.classList.remove("modal--open"),modalEl.classList.remove("modal__wrapper--visible"),body.classList.remove("hidden"))}));const basketListElement=document.querySelector(".catalog-order__list");function calcBasketPrice(){const e=document.querySelectorAll(".catalog-order__item");let t=0;e.forEach((function(e){const a=e.querySelector(".catalog-order__price-item"),c=e.querySelector(".catalog-order__count-item"),n=document.querySelector(".catalog-order__total-sum"),l=Number(c.innerText)*Number(a.innerText);t+=l,n.innerText=t+"₽"}))}function counter(e){if(e.target.classList.contains("catalog-order__plus")){const t=e.target.closest(".catalog-order__item").querySelector(".catalog-order__count-item");t.innerText=Number(t.innerText)+1,calcBasketPrice()}else if(e.target.classList.contains("catalog-order__minus")){const t=e.target.closest(".catalog-order__item"),a=t.querySelector(".catalog-order__count-item");a.innerText=Number(a.innerText)-1,Number(a.innerText)<1&&(calcBasketPrice(),t.remove(),basketStatus());document.querySelector(".catalog-basket__count").innerText=basketListElement.children.length,calcBasketPrice()}}function basketStatus(){if(basketListElement.children.length>0){document.querySelector(".catalog-order__title--empty").classList.add("disabled")}else{document.querySelector(".catalog-order__title--empty").classList.remove("disabled")}}function addToBasketBtn(e){if(e.target.classList.contains("catalog__card-button")){const t=e.target.closest(".catalog__card"),a={id:t.dataset.id,img:t.querySelector(".catalog__card-img").getAttribute("src"),title:t.querySelector(".catalog__card-title").innerText,weight:t.querySelector(".catalog__card-weight").innerText,price:t.querySelector(".catalog__card-price-item").innerText},c=basketListElement.querySelector(`[data-id="${a.id}"]`);if(c){const e=c.querySelector(".catalog-order__count-item");e.innerText=Number(e.innerText)+1}else{const e=`\n            <li class="catalog-order__item" data-id="${a.id}">\n              <div class="catalog-order__left">\n                <img class="catalog-order__img" src="${a.img}" alt='Бургер - "${a.title}"'>\n                <div class="catalog-order__desc">\n                  <h4 class="catalog-order__title">\n                    ${a.title}\n                  </h4>\n                  <span class="catalog-order__weight">\n                    ${a.weight}\n                  </span>\n                  <div class="catalog-order__price">\n                    <span class="catalog-order__price-item">${a.price}</span>\n                    <span class="catalog-order__price-symbol">₽</span>\n                  </div>\n                </div>\n              </div>\n              <div class="catalog-order__right">\n                <div class="catalog-order__count">\n                  <button class="catalog-order__minus">\n                    -\n                  </button>\n                  <span class="catalog-order__count-item">1</span>\n                  <button class="catalog-order__plus">\n                    +\n                  </button>\n                </div>\n              </div>\n            </li>\n          `;basketListElement.insertAdjacentHTML("beforeend",e)}basketStatus();document.querySelector(".catalog-basket__count").innerText=basketListElement.children.length,calcBasketPrice()}}function addToBasketLink(e){if(e.target.classList.contains("catalog__card-link")){const t=e.target.closest(".catalog__card"),a={id:t.dataset.id,img:t.querySelector(".catalog__card-img").getAttribute("src"),title:t.querySelector(".catalog__card-title").innerText,weight:t.querySelector(".catalog__card-weight").innerText,price:t.querySelector(".catalog__card-price-item").innerText},c=basketListElement.querySelector(`[data-id="${a.id}"]`);if(c){const e=c.querySelector(".catalog-order__count-item");e.innerText=Number(e.innerText)+1}else{const e=`\n          <li class="catalog-order__item" data-id="${a.id}">\n            <div class="catalog-order__left">\n              <img class="catalog-order__img" src="${a.img}" alt='Бургер - "${a.title}"'>\n              <div class="catalog-order__desc">\n                <h4 class="catalog-order__title">\n                  ${a.title}\n                </h4>\n                <span class="catalog-order__weight">\n                  ${a.weight}\n                </span>\n                <div class="catalog-order__price">\n                  <span class="catalog-order__price-item">${a.price}</span>\n                  <span class="catalog-order__price-symbol">₽</span>\n                </div>\n              </div>\n            </div>\n            <div class="catalog-order__right">\n              <div class="catalog-order__count">\n                <button class="catalog-order__minus">\n                  -\n                </button>\n                <span class="catalog-order__count-item">1</span>\n                <button class="catalog-order__plus">\n                  +\n                </button>\n              </div>\n            </div>\n          </li>\n        `;basketListElement.insertAdjacentHTML("beforeend",e)}basketStatus();document.querySelector(".catalog-basket__count").innerText=basketListElement.children.length,calcBasketPrice()}}window.addEventListener("click",(e=>{counter(e),addToBasketBtn(e),addToBasketLink(e)})),basketStatus();